<!DOCTYPE html>
<html lang="fr">
    <head>
        <script nonce="{{ csp_nonce() }}">
            // Appliquer le th√®me et la taille de police avant le rendu
            (function() {
                var theme = localStorage.getItem('theme');
                if (theme) {
                    document.documentElement.setAttribute('data-theme', theme);
                }
                var fontSize = localStorage.getItem('fontSize');
                if (fontSize) {
                    document.documentElement.setAttribute('data-font-size', fontSize);
                }
            })();
        </script>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0">
        <meta name="csrf-token" content="{{ csrf_token('ajax') }}">
        <meta name="theme-color" content="#24303E">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
        <meta name="apple-mobile-web-app-title" content="StopClope">
        <title>{% block title %}StopClope{% endblock %}</title>
        <link rel="manifest" href="{{ asset('manifest.json') }}">
        <link rel="apple-touch-icon" href="{{ asset('icons/icon-192.png') }}">
        <link rel="icon" type="image/png" sizes="32x32" href="{{ asset('icons/icon-32.png') }}">
        {% block stylesheets %}
        <link rel="stylesheet" href="{{ asset('css/app.css') }}">
        {% endblock %}

        {% block javascripts %}{% endblock %}
    </head>
    <body>
        <a href="#main-content" class="skip-link">Aller au contenu principal</a>

        <main id="main-content" role="main">
            {% block body %}{% endblock %}
        </main>

        <nav class="nav-bottom" role="navigation" aria-label="Navigation principale">
            <a href="{{ path('app_home') }}" class="nav-item {{ app.request.attributes.get('_route') == 'app_home' ? 'active' : '' }}" {% if app.request.attributes.get('_route') == 'app_home' %}aria-current="page"{% endif %}>
                <span class="nav-icon" aria-hidden="true">üè†</span>
                <span>Accueil</span>
            </a>
            <a href="{{ path('app_stats') }}" class="nav-item {{ app.request.attributes.get('_route') == 'app_stats' ? 'active' : '' }}" {% if app.request.attributes.get('_route') == 'app_stats' %}aria-current="page"{% endif %}>
                <span class="nav-icon" aria-hidden="true">üìä</span>
                <span>Stats</span>
            </a>
            <a href="{{ path('app_history') }}" class="nav-item {{ app.request.attributes.get('_route') == 'app_history' ? 'active' : '' }}" {% if app.request.attributes.get('_route') == 'app_history' %}aria-current="page"{% endif %}>
                <span class="nav-icon" aria-hidden="true">üìÖ</span>
                <span>Historique</span>
            </a>
            <a href="{{ path('app_settings') }}" class="nav-item {{ app.request.attributes.get('_route') == 'app_settings' ? 'active' : '' }}" {% if app.request.attributes.get('_route') == 'app_settings' %}aria-current="page"{% endif %}>
                <span class="nav-icon" aria-hidden="true">‚öôÔ∏è</span>
                <span>R√©glages</span>
            </a>
        </nav>

        <div id="toast" class="toast" role="status" aria-live="polite" aria-atomic="true"></div>

        <script src="{{ asset('js/app.js') }}"></script>
    </body>
</html>
